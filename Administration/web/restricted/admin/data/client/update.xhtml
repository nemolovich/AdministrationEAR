<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Création société</title>
    </h:head>
    <h:body>
        
    	<ui:composition template="/templates/page_template.xhtml">
            <ui:define name="title">
                | Modification société
            </ui:define>
            <ui:define name="content">
                <f:attribute name="header" value="Modification d'une société"/>
                <p:dialog id="dialogWorkstation"
                          appendToBody="true"
                          header="Création d'un poste"
                          widgetVar="createWorstation"
                          resizable="false"
                          draggable="false"
                          modal="true"
                          showEffect="clip"
                          hideEffect="clip">
                    <h:form id="createWorkstationForm">
                        <h:panelGrid columns="2" columnClasses="label,fields">

                            <p:outputLabel value="Marque:" for="wbrand" />
                            <p:inputText id="wbrand" value="#{workstationView.entity.brand}"
                                         title="Marque de la machine"
                                         required="true"
                                         requiredMessage="Le champs 'Marque' ne peut être vide"/>
                            
                            <p:outputLabel value="Type de station:" for="wwsType" />
                            <p:inputText id="wwsType" value="#{workstationView.entity.wsType}"
                                         title="Type de station" />
                            
                            <p:outputLabel value="Date de mise en service:" for="wstartDate" />
                            <p:inputMask id="wstartDate" value="#{workstationView.entity.startDate}"
                                         title="Date de mise en service de la machine"
                                         mask="99/99/9999">
                                <f:convertDateTime pattern="dd/MM/yyyy" />
                            </p:inputMask>
                            
                            <p:outputLabel value="Processeur:" for="wprocessor" />
                            <p:inputText id="wprocessor" value="#{workstationView.entity.processor}" title="Processor" />
                            
                            <p:outputLabel value="Moniteur:" for="wmonitor" />
                            <p:inputText id="wmonitor" value="#{workstationView.entity.monitor}" title="Monitor" />
                            
                            <p:outputLabel value="Carte graphique:" for="wvideoCard" />
                            <p:inputText id="wvideoCard" value="#{workstationView.entity.videoCard}" title="VideoCard" />
                            
                            <p:outputLabel value="Système d'exploitation:" for="woperatingSystem" />
                            <p:inputText id="woperatingSystem" value="#{workstationView.entity.operatingSystem}" title="OperatingSystem" />
                            
                            <p:outputLabel value="Mémoire vive:" for="wram" />
                            <p:inputText id="wram" value="#{workstationView.entity.ram}" title="Ram" />
                            
                            <p:outputLabel value="Disque dur:" for="whardDrive" />
                            <p:inputText id="whardDrive" value="#{workstationView.entity.hardDrive}" title="HardDrive" />
                            
                            <p:outputLabel value="Observations:" for="wobservations" />
                            <p:inputText id="wobservations" value="#{workstationView.entity.observations}" title="Observations" />

                        </h:panelGrid>
                        (<span class="red-star">*</span>: champs requis)<br />
                        <p:outputPanel>
                            <p:commandButton id="createWorkstation" value="Ajouter"
                                             type="submit"
                                             actionListener="#{workstationView.create(clientView.entity)}"
                                             icon="ui-icon-check"
                                             update=":createWorkstationForm :clientUpdate:ClientWorkstationList"
                                             styleClass="blue_icon"
                                             oncomplete="if(createRequest(createWorstation, xhr, status, args)){
                                                setConfirmUnload(true);}"
                                             />
                            <p:commandButton id="backWorkstation" value="Annuler"
                                             action="javascript:void(0);"
                                             styleClass="red_icon"
                                             type="reset"
                                             immediate="true"
                                             ajax="true"
                                             icon="ui-icon-closethick"
                                             onclick="createWorstation.hide();"
                                             />
                        </p:outputPanel>
                    </h:form>
                </p:dialog>
                <f:view>
                    <h:form id="clientUpdate">
                        <p:growl id="growlWizard" showDetail="true" life="30000" autoUpdate="true"/>
                        <p:wizard id="clientUpdateWizard"
                                  backLabel="Retour"
                                  nextLabel="Suivant"
                                  widgetVar="clientWizard"
                                  showNavBar="true">
                            <p:tab id="general" title="Informations" rendered="#{not clientView.isCreating}">
                                
                                <p:fieldset legend="Informations générales">
                                    <p>
                                        Veuillez renseigner les informations générales
                                        de la société.
                                        <br />
                                        (<span class="red-star">*</span>: champs requis)
                                    </p>
                                    <h:panelGrid columns="2" columnClasses="label,fields">
                                        
                                        <p:outputLabel value="Nom de la société" for="name"/>
                                        <p:inputText id="name" value="#{clientView.entity.name}" maxlength="45"
                                                     title="Nom de la société"
                                                     required="true"
                                                     requiredMessage="Le nom de la société ne peut être vide">
                                            <f:validator binding="#{clientUniqueFieldValidator}"/>
                                            <f:attribute name="fieldName" value="Name" />
                                            <f:attribute name="update_id" value="#{clientView.entity.id}" />
                                        </p:inputText>
                                        
                                        <p:outputLabel value="Adresse:" for="address"/>
                                        <p:inputText id="address" value="#{clientView.entity.address}" maxlength="100"
                                                     title="Adresse de la société"
                                                     required="true"
                                                     requiredMessage="Veuillez indiquer l'adresse de la société"/>

                                        <p:outputLabel value="Code postal:" for="postalcode" />
                                        <p:inputMask id="postalcode" value="#{clientView.entity.postalcode}" mask="99999"
                                                     title="Code postal de la société"
                                                     required="true"
                                                     requiredMessage="Veuillez indiquer le code postal de la société"/>

                                        <p:outputLabel value="Téléphone:" for="phone" />
                                        <p:inputMask id="phone" value="#{clientView.entity.phone}" mask="99.99.99.99.99"
                                                     title="Numéro de téléphone de la société"
                                                     required="true"
                                                     requiredMessage="Veuillez indiquer le numéro de téléphone de la société">
                                            <f:validator binding="#{phonePatternValidator}"/>
                                        </p:inputMask>

                                        <p:outputLabel value="Fax:" for="fax" />
                                        <p:inputMask id="fax" value="#{clientView.entity.fax}"  mask="99.99.99.99.99"
                                                     title="Numéro de fax de la société">
                                            <f:validator binding="#{faxPatternValidator}"/>
                                        </p:inputMask>
                                        
                                        <p:outputLabel value="Adresse mail:" for="mail" />
                                        <p:inputText id="mail" value="#{clientView.entity.mail}" maxlength="30"
                                                     title="Adresse mail de la société"
                                                     required="true"
                                                     requiredMessage="Veuillez indiquer l'adresse mail de la société">
                                            <f:validator binding="#{emailPatternValidator}"/>
                                        </p:inputText>
                                    
                                        <p:outputLabel value="Type d'intervention:" for="interventionType" />
                                        <h:inputTextarea id="interventionType" value="#{clientView.entity.interventionType}"
                                                         title="Type d'interventions"
                                                         styleClass="textarea_min"
                                                         rows="4"/>
                                    
                                    </h:panelGrid>
                                </p:fieldset>
                            </p:tab>
                            
                            <p:tab id="details" title="Détails" rendered="#{not clientView.isCreating}">
                                <table width="100%">
                                    <tr>
                                        <td style="vertical-align: top !important;">
                                            <p:fieldset legend="Tarifs">
                                                <h:panelGrid columns="3" columnClasses="label,fields,label">

                                                    <p:outputLabel value="Tarif d'intervention:" for="tarif" />
                                                    <p:inputText id="tarif" value="#{clientView.entity.tarif}" maxlength="20"
                                                                 title="Tarif" size="10"/>
                                                    <h:outputText value="€"/>

                                                    <p:outputLabel value="Frais de déplacement:" for="deplacement" />
                                                    <p:inputText id="deplacement" value="#{clientView.entity.deplacement}" maxlength="20"
                                                                 title="Frais de déplacement" size="10"/>
                                                    <h:outputText value="€"/>

                                                </h:panelGrid>
                                            </p:fieldset>
                                            <p:fieldset legend="Connexion internet">
                                                <h:panelGrid columns="2" columnClasses="label,fields">

                                                    <p:outputLabel value="Opérateur:" for="operator"/>
                                                    <p:inputText id="operator" value="#{clientView.entity.operator}"
                                                                 title="Opérateur Internet" maxlength="50"/>

                                                    <p:outputLabel value="Identifiant:" for="internet_login"/>
                                                    <p:inputText id="internet_login" value="#{clientView.entity.internetLogin}"
                                                                 title="Identifiant Internet" maxlength="50"/>

                                                    <h:outputLabel for="internet_password" value="Mot de passe:" />
                                                    <p:password id="internet_password" value="#{clientView.entity.internetPassword}"
                                                                redisplay="true" title="Mot de passe Internet" maxlength="64">
                                                        <f:validator binding="#{passwordValidator}"/>
                                                        <f:attribute name="update_id" value='#{clientView.entity.id}' />
                                                        <f:attribute name="confirm" value="#{internet_confirm}" />
                                                    </p:password>

                                                    <h:outputLabel for="internet_confirm" value="Confirmation:" />
                                                    <p:password id="internet_confirm" binding="#{internet_confirm}"
                                                                redisplay="true" title="Confirmation du mot de passe Internet" maxlength="64"/>

                                                </h:panelGrid>
                                            </p:fieldset>
                                        </td>
                                        <td style="vertical-align: top !important;">
                                            <p:fieldset legend="Observations">

                                                <p:outputLabel value="Observations:" for="observations"/>
                                                <br />
                                                <h:inputTextarea id="observations" value="#{clientView.entity.observations}"
                                                                 styleClass="textarea_primefaces_display"
                                                                 rows="4"
                                                                 title="Observations"/>
                                            </p:fieldset>
                                        </td>
                                    </tr>
                                </table>
                            </p:tab>
                            
                            <p:tab id="postes" title="Postes">
                                <p:fieldset legend="Postes">
                                    
                                    <p:dataList id="ClientWorkstationList"
                                                value="#{clientView.entity.workstationList}"
                                                var="poste">
                                        <p:column>
                                            <h:outputText value="#{poste}"/>
                                        </p:column>
                                    </p:dataList>
                                    <p:commandButton value="Ajouter un poste"
                                                     title="Ajouter un poste à cette société"
                                                     actionListener="#{workstationView.entityCreate(clientView.entity)}"
                                                     onclick="createWorstation.show();"/>
                                </p:fieldset>
                            </p:tab>
                            
                            <p:tab id="emails" title="E-Mails">
                                <p:fieldset legend="E-Mails">
                                    E-Mails
                                </p:fieldset>
                            </p:tab>
                            
                            <p:tab id="users" title="Utilisateurs">
                                <p:fieldset legend="Utilisateurs">
                                    Utilisateurs
                                </p:fieldset>
                            </p:tab>
                            
                            <p:tab id="finish" title="Récapitulatif">
                                <table width="100%">
                                    <tr>
                                        <td style="vertical-align: top !important;">
                                            <p:fieldset legend="Informations générales">
                                                <h:panelGrid columns="2" columnClasses="label,fields">

                                                    <h:outputText value="Nom de la société"/>
                                                    <h:outputText value="#{clientView.entity.name}"/>

                                                    <h:outputText value="Adresse:"/>
                                                    <h:outputText value="#{clientView.entity.address}"/>

                                                    <h:outputText value="Code postal:" />
                                                    <h:outputText value="#{clientView.entity.postalcode}"/>

                                                    <h:outputText value="Téléphone:" />
                                                    <h:outputText value="#{clientView.entity.phone}"/>

                                                    <h:outputText value="Fax:" />
                                                    <h:outputText value="#{clientView.entity.fax}"/>

                                                    <h:outputText value="Adresse mail:" />
                                                    <h:outputText value="#{clientView.entity.mail}"/>

                                                    <h:outputText value="Type d'intervention:" />
                                                    <h:outputText value="#{clientView.entity.interventionType}"/>

                                                </h:panelGrid>
                                            </p:fieldset>
                                            <p:fieldset legend="Connexion internet">
                                                <h:panelGrid columns="2" columnClasses="label,fields">

                                                    <h:outputText value="Opérateur:"/>
                                                    <h:outputText value="#{clientView.entity.operator}"/>

                                                    <h:outputText value="Identifiant:"/>
                                                    <h:outputText value="#{clientView.entity.internetLogin}"/>

                                                    <h:outputText value="Mot de passe:" />
                                                    <p:outputPanel rendered="#{not empty clientView.entity.internetPassword}">
                                                        <p:commandButton
                                                            onmousedown="showHidden('clientCreate','internetPasswordView',
                                                                        '#{clientView.entity.internetPassword}');"
                                                            onmouseup="hideHidden('clientCreate','internetPasswordView',
                                                                     '#{utils.getHiddenString(clientView.entity.internetPassword)}');"
                                                            onmouseout="hideHidden('clientCreate','internetPasswordView',
                                                                     '#{utils.getHiddenString(clientView.entity.internetPassword)}');"
                                                            id="password_unlocker"
                                                            icon="ui-icon-unlocked"
                                                            title="Afficher le mot de passe"
                                                            style="font-size:50%;vertical-align: bottom;"/>
                                                        <h:outputText id="internetPasswordView"
                                                                      value="#{utils.getHiddenString(clientView.entity.internetPassword)}"/>
                                                    </p:outputPanel>
                                                    <h:outputText value="" rendered="#{empty clientView.entity.internetPassword}"/>

                                                </h:panelGrid>
                                            </p:fieldset>
                                        </td>
                                        <td style="vertical-align: top !important;">
                                            <p:fieldset legend="Tarifs">
                                                <h:panelGrid columns="2" columnClasses="label,fields">

                                                    <h:outputText value="Tarif d'intervention:" />
                                                    <h:outputText value="#{clientView.entity.tarif} €"
                                                                  rendered="#{not empty clientView.entity.tarif}"/>
                                                    <h:outputText value="aucun"
                                                                  rendered="#{empty clientView.entity.tarif}"/>

                                                    <h:outputText value="Frais de déplacement:" />
                                                    <h:outputText value="#{clientView.entity.deplacement} €"
                                                                  rendered="#{not empty clientView.entity.deplacement}"/>
                                                    <h:outputText value="aucun"
                                                                  rendered="#{empty clientView.entity.deplacement}"/>

                                                </h:panelGrid>
                                            </p:fieldset>
                                            <p:fieldset legend="Observations">
                                                <h:inputTextarea value="#{clientView.entity.observations}"
                                                                 readonly="true"
                                                                 rows="4"
                                                                 styleClass="textarea_auto"
                                                                 title="Observations"/>
                                            </p:fieldset>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="vertical-align: top !important;">
                                        </td>
                                    </tr>
                                </table>
                                <p:outputPanel styleClass="buttons_panel">
                                    <p:commandButton value="Confirmer"
                                                     title="Enregistrer les changements"
                                                     type="submit"
                                                     update=":growl"
                                                     action="#{clientView.update()}"/>
                                </p:outputPanel>
                            </p:tab>
                        </p:wizard>
                    </h:form>
                </f:view>
            </ui:define>
        </ui:composition>
    </h:body>
</html>

