<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        <p:dialog id="logViewPopup"
                  dynamic="true"
                  appendToBody="true"
                  header="Fichier journal du serveur"
                  widgetVar="logViewDialog"
                  resizable="true"
                  draggable="true"
                  maximizable="true"
                  modal="true"
                  width="750"
                  height="500"
                  minWidth="750"
                  minHeight="500"
                  showEffect="clip"
                  hideEffect="clip">
            <h:form id="displayLogForm">
                <p:hotkey bind="esc" handler="logViewDialog.hide();"/>
                <div id="logContainer">
                    <h:outputText value="#{logger.getHTMLLog()}"
                                  escape="false"/>
                    <script type="text/javascript">
                        $(document).ready(function()
                        {
                            var element=document.getElementById("logContainer");
                            var maxEHeight=getNavigatorHeight();
                            var parentHeight=document.getElementById("logViewPopup").style.height;
                            if(maxEHeight>parentHeight)
                            {
                                maxEHeight=parentHeight;
                            }
                            element.style.maxHeight=(maxEHeight-75)+"px";
                            //ui-dialog-content
                        });
                    </script>
                </div>
            </h:form>
        </p:dialog>
    </h:body>
</html>

